<!DOCTYPE html>
<html lang="en">
<head>
    <title>TaskBird Checklist</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <style type="text/css">
        html, body {
            height: 100%;
            margin: 0;
            padding: 0;
            font-family: "Monaco",monospace; /* Added a default font */
            background-color: white; /* Set the entire background color */
        }

        .logoBox {
            height: 18%;
        }

        .logo {
            position: absolute;
            width: 99%;
            height: 130px;
            left: 0;
            top: 0;
            display: block;
        }

        .mode {
            position: absolute;
            top: 2%;
            right: 2%;
            z-index: 3;
        }

        .mode button:hover {
            color: white;
            background-color: #DCD0FF;
        }

        .mode button {
            margin-top: 2%;
            text-decoration: none;
            color: black;
            padding: 10px;
            background-color: #ffc800;
            border-radius: 5px;
            text-align: center;
            cursor: pointer;
            border: none;
            outline: none;
        }

        .nav {
            height: 100%;
            width: 12%;
            position: fixed;
            z-index: 1; /* Update the z-index */
            top: 0;
            left: 0;
            background-color: #DCD0FF;
            overflow-x: hidden;
            padding-top: 16px;
            line-height: 10px;
        }


        .nav a {
            padding: 6px 8px 6px 16px;
            text-decoration: none;
            font-size: 15px;
            color: #000000;
            display: block;
        }

        .pages {
            height: 70%;
            width: 100%;
            position: relative;
            z-index: 1;
            top: 0;
            left: 0;
            background-color: #DCD0FF;
            overflow-x: hidden;
            padding-top: 16px;
        }

        .pages a {
            padding: 6px 8px 6px 16px;
            text-decoration: none;
            font-size: 1.3vw;
            color: #000000;
            display: block;
        }

        .pages a:hover {
            color: #ffd036;
        }

        .topPart {
            margin-left: 140px; /* Adjusted margin to match the width of the navigation bar */
            margin-right: 40px;
            width: calc(100% - 160px); /* Adjusted width to fill the remaining space */
            text-align: center;
        }
        
        #checkList {
            margin: 20px auto;
            text-align: center;
        }

        #addTaskBtn {
            padding: 15px;
            margin: 10px;
        border-radius: 8px;
        }

        #checklistWrapper {
    border: 2px solid #000;
    padding: 10px;
    min-height: 200px;
    margin: 20px 40px 20px 100px; /* Adjusted margin to match the width of the navigation bar */
    width: calc(100% - 200px); /* Adjusted width to fill the remaining space */
    text-align: center;
    display: flex;
    flex-direction: column;
    border-radius: 15px; /* Rounded edges */
}


.task {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 10px;
    margin-bottom: 10px;
    border: 1px solid #000;
    border-radius: 10px;
}

/* General style for buttons */
button {
    transition: background-color 0.3s ease; /* Smooth transition for the hover effect */
}

/* Hover effect */
button:hover {
    background-color: #d3d3d3; /* Change to a darker shade */
}

.button-container {
    display: flex;
}

.task-button {
    padding: 5px 10px;
    margin-left: 5px; /* Space between buttons */
    border-radius: 5px;
    cursor: pointer;
}

        .task div {
            display: flex;
            gap: 10px;
        }

        #addTaskBtn {
    background-color:#DCD0FF; /* Light purple color */
    padding: 15px 30px; /* Increase padding for wider appearance */
    border-radius: 8px;
    border: 2px solid #000;
    cursor: pointer;
    outline: none;
    color: black; /* Adjust text color as needed */
    font-size: 16px; /* Optionally adjust font size */
    transition: background-color 0.3s ease; /* Smooth transition for hover effect */
}

#addTaskBtn:hover {
    background-color: #C0AEC0; /* Slightly darker shade for hover effect */
}
        
        #taskModal {
          display: none;
          position: fixed;
          top: 0;
          left: 0;
          width: 100%;
          height: 100%;
          background-color: rgba(0, 0, 0, 0.5);
        }

        .modal-content {
              background-color: #fefefe;
              margin: 15% auto;
              padding: 20px;
              border: 1px solid #888;
              max-width: 400px;
              text-align: center;
            }
            
            .task-section {
              margin-bottom: 10px;
            }

            #urgencyButtons {
              display: flex;
              justify-content: space-between;
              margin-top: 15px; /* Increase the margin for more distance */
            }
            
            .urgencyBtn {
              padding: 12px; /* Increase the padding for a larger button */
              margin: 4px;
              border: none;
              outline: none;
              cursor: pointer;
              border-radius: 8px; /* Add rounded edges */
              font-size: 14px; /* Increase the font size */
            }
            
            .urgencyBtn.selected {
              border: 2px solid black;
            }

        .close {
          color: #aaa;
          float: right;
          font-size: 28px;
          font-weight: bold;
        }
        
        .close:hover {
          color: black;
          cursor: pointer;
        }

        #doneListWrapper {
    border: 2px solid #000;
    padding: 10px;
    margin: 20px 40px 20px 100px; /* Adjusted margin to match the width of the navigation bar */
    width: calc(100% - 200px); /* Adjusted width to fill the remaining space */
    border-radius: 15px;
    display: flex;
    text-align: center;
    flex-direction: column;
    min-height: 200px;
}

    </style>
</head>
<body>
    <div class="nav">
        <a href="https://taskbird01-a292729c6ec9.herokuapp.com/home.html" class="logoBox">
            <img class="logo" src="https://felixzsong8.github.io/TaskBird/TaskBird.png" id="logo" ></img>
        </a>
        <div class="pages">
            <a href='https://taskbird01-a292729c6ec9.herokuapp.com/home.html'><i class='fa fa-fw fa-home'></i>Home</a>
            <a href='https://taskbird01-a292729c6ec9.herokuapp.com/index.html'><i class='fa fa-fw fa-calendar'></i>Calendar</a>
            <a href='https://taskbird01-a292729c6ec9.herokuapp.com/checklist.html'><i class='fa fa-fw fa-check-square-o'></i><strong>CheckList</strong></a>
            <!--a href='https://yvonnel.sgedu.site/final_proj/connect.php'><i class='fa fa-fw fa-user'></i>></i>Connect</a-->
        </div>
    </div>
    <div class="mode">
        <!--button type="button" id="mode" onclick="changeColor()">Light Mode</button-->
        <button id="clearCookiesBtn" onclick="clearAllCookies()">Clear Cookies</button>
    </div>
    <div class="topPart"> 
        <h1>My Daily Checklist</h1>
        <p>Welcome to your checklist! Add events and see them in order of urgency.</p>
        <div class="addTaskBtn"><button id="addTaskBtn">Add Task</button></div>
        <div id="checklistWrapper">
            <h2>TODO List</h2>
        </div>
        <div id="doneListWrapper">
            <h2>Completed Tasks</h2>
        </div>
    </div>

    <!-- <div class="addTaskBtn"><button id="addTaskBtn">Add Task</button> </div>  -->

    <!-- <div id="checklistWrapper">Checklist</div> -->

    <div id="taskModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <div class="task-section">
                <label for="taskName">Task Name:</label>
                <input type="text" id="taskName" required>
            </div>
            <div class="task-section">
                <label for="duration">Estimated Duration (in minutes):</label>
                <input type="number" id="duration" required>
            </div>
            <div class="task-section">
                <label>Urgency:</label>
                <div id="urgencyButtons">
                    <button class="urgencyBtn" data-urgency="1" style="background-color: rgb(83, 121, 245);"><span data-urgency="1">Not Urgent</span></button>
                    <button class="urgencyBtn" data-urgency="2" style="background-color: rgb(60,179,113);"><span data-urgency="2">Slightly Urgent</span></button>
                    <button class="urgencyBtn" data-urgency="3" style="background-color: rgb(247, 198, 51);"><span data-urgency="3">Moderately Urgent</span></button>
                    <button class="urgencyBtn" data-urgency="4" style="background-color: rgb(249, 92, 92);"><span data-urgency="4">Very Urgent</span></button>
                </div>
            </div>
            <button id="addTask">Submit Task</button>
        </div>
    </div>

    <script>
    document.addEventListener('DOMContentLoaded', function () {
        const addTaskBtn = document.getElementById('addTaskBtn');
        const checklistWrapper = document.getElementById('checklistWrapper');
        const donelistWrapper = document.getElementById('doneListWrapper');
        const taskModal = document.getElementById('taskModal');
        const closeBtn = document.querySelector('.close');
        const addTask = document.getElementById('addTask');


        addTaskBtn.addEventListener('click', () => {
            taskModal.style.display = 'block';
        });

        closeBtn.addEventListener('click', () => {
            taskModal.style.display = 'none';
        });

        window.addEventListener('click', (event) => {
            if (event.target === taskModal) {
                taskModal.style.display = 'none';
            }
        });

        addTask.addEventListener('click', () => {
            const taskName = document.getElementById('taskName').value.trim();
            const duration = document.getElementById('duration').value.trim();
            let urgency = 0;
            let urgencyColor = '';

            document.querySelectorAll('.urgencyBtn').forEach((btn) => {
                if (btn.classList.contains('selected')) {
                    urgency = parseInt(btn.getAttribute('data-urgency'));
                    urgencyColor = btn.style.backgroundColor;
                }
            });

            if (taskName === '' || duration === '' || urgency === 0) {
                alert('Please fill out a name, estimated duration, and urgency');
                return;
            }

            const newTask = document.createElement('div');
            newTask.className = 'task';
            newTask.style.backgroundColor = urgencyColor;
            newTask.innerHTML = `<strong>${taskName}</strong> - Duration: ${duration} min`;
            newTask.dataset.urgency = urgency;
            newTask.dataset.duration = duration

            let tasks = Array.from(checklistWrapper.getElementsByClassName('task'));
            let insertIndex = tasks.findIndex(task => parseInt(task.dataset.urgency) <= urgency);

            if (insertIndex === -1) {
                checklistWrapper.appendChild(newTask);
            } else {
                checklistWrapper.insertBefore(newTask, tasks[insertIndex]);
            }

            const buttonContainer = document.createElement('div');
            buttonContainer.className = 'button-container';

            const doneButton = document.createElement('button');
            doneButton.innerText = 'DONE';
            doneButton.className = 'task-button';
            doneButton.addEventListener('click', () => {
                newTask.removeChild(buttonContainer); // Remove the buttons
                donelistWrapper.appendChild(newTask); // Move the task to the DoneList
                saveDonelistToCookies();
                removeDonelistItemFromCookies(taskName);
            });
            buttonContainer.appendChild(doneButton);

            newTask.appendChild(buttonContainer);
            taskModal.style.display = 'none';

            const checklistItems = Array.from(checklistWrapper.getElementsByClassName('task'));
            const checklistData = checklistItems.map(item => ({
                name: item.querySelector('strong').innerText,
                duration: item.dataset.duration,
                urgency: item.dataset.urgency,
                backgroundColor: item.style.backgroundColor
            }));
            saveChecklistToCookies();

        });      
        loadChecklistFromCookies();
        loadDonelistFromCookies();
        const urgencyButtons = document.querySelectorAll('.urgencyBtn');
        urgencyButtons.forEach((btn) => {
            btn.addEventListener('click', () => {
                urgencyButtons.forEach((otherBtn) => {
                    otherBtn.classList.remove('selected');
                });
                btn.classList.add('selected');
            });
        });
    });
    </script>

    <script>
        //Script to work for the Date
        var currentDate = new Date();
        dateContainer = document.getElementById("date");
        days = ['Sunday','Monday','Tuesday','Wednesday','Thursday','Friday','Saturday']
        day = days[currentDate.getDay()];
        //dateContainer.innerHTML = day + ", " + (currentDate.getMonth()+1) + "/" + currentDate.getDate() + "/" + currentDate.getFullYear();
        //Lightmode
        function changeColor() {
        }
    </script>
    <script>
        // Function to set a cookie
        function setCookie(name, value, days) {
            const expirationDate = new Date();
            expirationDate.setDate(expirationDate.getDate() + days);
            const cookieValue = encodeURIComponent(value) + '; expires=' + expirationDate.toUTCString() + '; path=/';
            document.cookie = name + '=' + cookieValue;
        }
    
        // Function to get a cookie by name
        function getCookie(name) {
            const cookies = document.cookie.split('; ');
            for (const cookie of cookies) {
                const [cookieName, cookieValue] = cookie.split('=');
                if (cookieName === name) {
                    return decodeURIComponent(cookieValue);
                }
            }
            return null;
        }
        function saveChecklistToCookies() {
            const checklistItems = Array.from(checklistWrapper.getElementsByClassName('task'));
            const checklistData = checklistItems.map(item => ({
                name: item.querySelector('strong').innerText,
                duration: item.dataset.duration,
                urgency: item.dataset.urgency,
                backgroundColor: item.style.backgroundColor
            }));
            setCookie('checklist', JSON.stringify(checklistData), 7);
        }
        
        function saveDonelistToCookies() {
            const donelistWrapper = document.getElementById('doneListWrapper');
            const donelistItems = Array.from(donelistWrapper.getElementsByClassName('task'));
            const donelistData = donelistItems.map(item => ({
                name: item.querySelector('strong').innerText,
                duration: item.dataset.duration,
                urgency: item.dataset.urgency,
                backgroundColor: item.style.backgroundColor
            }));
            setCookie('donelist', JSON.stringify(donelistData), 7);
        }

        // Function to load checklist data from cookies
        function loadDonelistFromCookies() {
            const storedDonelist = getCookie('donelist');
            if (storedDonelist) {
                const donelistData = JSON.parse(storedDonelist);

                donelistData.forEach(item => {
                    const newTask = document.createElement('div');
                    newTask.className = 'task';
                    newTask.style.backgroundColor = item.backgroundColor;
                    newTask.innerHTML = `<strong>${item.name}</strong> - Duration: ${item.duration} min`;
                    newTask.dataset.urgency = item.urgency;
                    newTask.dataset.duration = item.duration
                    const donelistWrapper = document.getElementById('doneListWrapper');
                    const buttonContainer = document.createElement('div');
            
                
                    newTask.appendChild(buttonContainer);
                    donelistWrapper.appendChild(newTask);
                });
            }
        }
        function loadChecklistFromCookies() {
            const storedChecklist = getCookie('checklist');
            if (storedChecklist) {
                const checklistData = JSON.parse(storedChecklist);

                checklistData.forEach(item => {
                    const newTask = document.createElement('div');
                    newTask.className = 'task';
                    newTask.style.backgroundColor = item.backgroundColor;
                    newTask.innerHTML = `<strong>${item.name}</strong> - Duration: ${item.duration} min`;
                    newTask.dataset.urgency = item.urgency;
                    newTask.dataset.duration = item.duration

                    const buttonContainer = document.createElement('div');
                    buttonContainer.className = 'button-container';

                    newTask.appendChild(buttonContainer);
                    checklistWrapper.appendChild(newTask);
                    const doneButton = document.createElement('button');
                    doneButton.innerText = 'DONE';
                    doneButton.className = 'task-button';
                    doneButton.addEventListener('click', () => {
                        const donelistWrapper = document.getElementById('doneListWrapper');
                        newTask.removeChild(buttonContainer); // Remove the buttons
                        donelistWrapper.appendChild(newTask); // Move the task to the DoneList
                        saveDonelistToCookies();
                        removeDonelistItemFromCookies(item.name);
                    });
                    buttonContainer.appendChild(doneButton);

                    newTask.appendChild(buttonContainer);
                    taskModal.style.display = 'none';
                });
            }
        }
        function removeDonelistItemFromCookies(itemName) {
            const storedChecklist = getCookie('checklist');
            if (storedChecklist) {
                const checklistData = JSON.parse(storedChecklist);
                const updatedChecklist = checklistData.filter(item => item.name !== itemName);
                setCookie('checklist', JSON.stringify(updatedChecklist), 7);
            }
        }
        
        function clearAllCookies() {
            const cookies = document.cookie.split('; ');

            for (const cookie of cookies) {
                const [cookieName] = cookie.split('=');
                document.cookie = `${cookieName}=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/`;
            }
        }
    </script>
</body>
</html>
